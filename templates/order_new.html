{% extends "base.html" %}
{% block content %}
<h2>สั่งอาหาร โต๊ะ: {{ table.name }}</h2>
<div class="flex">
  <div class="menu-grid">
    <form method="post">
      <label>เมนู
        <select name="item_id">
          {% for it in items %}
          <option value="{{ it.id }}">{{ it.name }} — {{ "%.2f"|format(it.price) }}</option>
          {% endfor %}
        </select>
      </label>
      <label>จำนวน <input type="number" name="qty" value="1" min="1"></label>
      <button class="btn">เพิ่มรายการ</button>
    </form>
  </div>
  <div class="bill">
    <h3>บิล</h3>
    {% if order %}
    <table>
      <tr><th>เมนู</th><th>จำนวน</th><th>ราคา</th></tr>
      {% for it in order.items %}
      <tr><td>{{ it.menu_item.name }}</td><td>{{ it.quantity }}</td><td>{{ "%.2f"|format(it.unit_price * it.quantity) }}</td></tr>
      {% endfor %}
      <tr><th colspan="2">รวม</th><th>{{ "%.2f"|format(order.total_amount) }}</th></tr>
    </table>
    <a class="btn" href="{{ url_for('close_order', order_id=order.id) }}">ปิดบิล</a>
    {% else %}
    <p>ยังไม่มีออเดอร์</p>
    {% endif %}
  </div>
</div>
{% endblock %}
